!function(){"use strict";angular.module("book",["ngSanitize","ngAria","ngResource","ui.router","ngMaterial","toastr"])}(),function(){"use strict";function o(o,t){var e={books:[],SaveState:function(){return sessionStorage.userService=angular.toJson(e.books),t.resolve(sessionStorage.userService)},RestoreState:function(){e.books=angular.fromJson(sessionStorage.userService)||[]},Remove:function(o){var t=e.books.indexOf(o);return e.books.splice(t,1),e.SaveState()},Add:function(o){return e.books.push(o),e.SaveState()}};return e}o.$inject=["$rootScope","$q"],angular.module("book").service("localBookService",o)}(),function(){"use strict";function o(o,t){return t(o,{callback:"JSON_CALLBACK",key:"AIzaSyATldFLGtPPZVLecasP0nFXkX6RqXa7VEI"},{get:{method:"JSONP"}})}o.$inject=["api","$resource"],angular.module("book").service("bookService",o)}(),function(){"use strict";function o(){function o(o,t,e,i){var a=this;a.go=function(t){o.$emit("searching",{searchTerm:t})},a.goSearch=function(){if(!a.txtSearch)return t.show(t.simple().textContent("Digite o nome do livro").position("bottom center").hideDelay(3e3)),e.document.querySelector("#input-search").focus(),!1;if("home"!==i.current.name){var o=i.go("home");o.then(function(){a.go(a.txtSearch)})}else a.go(a.txtSearch)}}o.$inject=["$rootScope","$mdToast","$window","$state"];var t={restrict:"A",replace:!0,templateUrl:"app/components/navbar/navbar.html",controller:o,controllerAs:"vm",bindToController:!0};return t}angular.module("book").directive("navbar",o)}(),function(){"use strict";function o(){function o(o,t,e,i){var a=this;a.openBookDetail=function(o,e){t.show({controller:["local",function(o){var e=this;e.book=o.book,e.cancel=function(){t.cancel()}}],templateUrl:"app/components/bookDialog.html",controllerAs:"dialog",local:{book:e},targetEvent:o,clickOutsideToClose:!0,fullscreen:!0})},a.addToFavorites=function(o){e.Add(o).then(function(){i.show(i.simple().textContent("Livro Adicionado com sucesso").position("bottom center").hideDelay(3e3))})},a.removeToFavorites=function(o,e){var i=t.confirm().title("Remover Livro").textContent("Tem certeza que deseja remover este livro?").ariaLabel("Remover Livro").targetEvent(o).ok("Confirmar").cancel("Cancelar");t.show(i).then(function(){a.confirmRemoveToFavorites(e)},function(){})},a.confirmRemoveToFavorites=function(o){e.Remove(o).then(function(){i.show(i.simple().textContent("Livro removido com sucesso").position("bottom center").hideDelay(3e3))})}}o.$inject=["$scope","$mdDialog","localBookService","$mdToast"];var t={restrict:"A",scope:{items:"=",searchTerm:"@",router:"@"},templateUrl:"app/components/card/card.html",controller:o,controllerAs:"card",bindToController:!0};return t}angular.module("book").directive("cardBook",o)}(),function(){"use strict";function o(o,t,e,i,a){var n=this;n.searching=!1,n.searchTerm="",n.totalItems=0,n.startIndex=0,n.maxResults=40,n.totalPages=0,n.search=function(t){n.items=[],n.searching=!0,n.startIndex=t,o.get({q:n.searchTerm,startIndex:t*n.maxResults,maxResults:n.maxResults},function(o){n.items=o.items,n.totalItems=o.totalItems,n.totalPages=Math.ceil(n.totalItems/n.maxResults),n.searching=!1})};var r=a.$on("searching",function(o,t){n.searchTerm=t.searchTerm,n.search(0)});t.$on("$destroy",function(){r()})}o.$inject=["bookService","$scope","localBookService","$mdDialog","$rootScope"],angular.module("book").controller("MainController",o)}(),function(){"use strict";function o(){return function(o,t){return t&&o?o.replace(new RegExp("("+t+")","gi"),"<kbd>$1</kbd>"):o}}angular.module("book").filter("highlight",o)}(),function(){"use strict";function o(o,t,e){var i=this;e.RestoreState(),i.items=e.books}o.$inject=["bookService","$scope","localBookService"],angular.module("book").controller("FavoritesController",o)}(),function(){"use strict";function o(o,t){o.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("favorites",{url:"/favorites",templateUrl:"app/favorites/favorites.html",controller:"FavoritesController",controllerAs:"favorites"}),t.otherwise("/")}o.$inject=["$stateProvider","$urlRouterProvider"],angular.module("book").config(o)}(),function(){"use strict";angular.module("book").constant("api","https://www.googleapis.com/books/v1/volumes")}(),angular.module("book").run(["$templateCache",function(o){o.put("app/components/bookDialog.html",'<md-dialog aria-label="Book Dialog"><form ng-cloak><md-toolbar><div class=md-toolbar-tools><h2>{{dialog.book.volumeInfo.title}}</h2><span flex></span><md-button class=md-icon-button ng-click=dialog.cancel()><i class=material-icons>close</i></md-button></div></md-toolbar><md-dialog-content><div class=md-dialog-content><img ng-src="{{ dialog.book.volumeInfo.imageLinks.thumbnail }}"><p>{{dialog.book.volumeInfo.description}}</p><ul><li>Etag: {{dialog.book.etag}}</li><li>Id: {{dialog.book.id}}</li><li>Language: {{dialog.book.volumeInfo.language}}</li><li>Rating: {{dialog.book.volumeInfo.ratingsCount}}</li></ul></div></md-dialog-content></form></md-dialog>'),o.put("app/favorites/favorites.html","<div flex layout-fill><section class=list-events><md-subheader class=md-primary>{{favorites.items.length}} Livros favoritos</md-subheader><div card-book items=favorites.items router=favorites></div></section></div>"),o.put("app/main/main.html",'<div flex layout-fill><!-- loading --><div layout-fill layout-align="center center" layout=column ng-show=main.searching><md-progress-circular md-mode=indeterminate md-diameter=60></md-progress-circular></div><!-- paginacao rapidinha --><div flex layout=row ng-show="!main.searching && main.items.length > 0" layout-align="center center" class=md-paginate><button class=md-paginate-button ng-class="{\'active\': $index == main.startIndex}" ng-click=main.search($index) ng-repeat="n in [].constructor(main.totalPages) track by $index">{{$index + 1}}</button></div><!-- items --><section ng-show="main.items.length > 0 && !main.searching" class=list-events><md-subheader class=md-primary>Pesquisando por: {{main.searchTerm}} - {{main.totalItems}} Resultados encontrados</md-subheader><div card-book items=main.items search-term={{main.searchTerm}}></div></section></div>'),o.put("app/components/card/card.html",'<md-card ng-repeat="item in card.items"><md-card-title><md-card-title-media><div class="md-media-sm card-media"><a href=javascript:void(0) ng-click="card.openBookDetail($event, item)"><img ng-src="{{ item.volumeInfo.imageLinks.thumbnail }}" alt="{{ item.volumeInfo.title }}"></a></div></md-card-title-media><md-card-title-text><span class=md-headline>{{ item.volumeInfo.title }}</span> <span class=md-subhead ng-bind-html="item.volumeInfo.description | highlight:card.searchTerm"></span></md-card-title-text></md-card-title><md-divider></md-divider><md-card-actions layout=row layout-align="end center"><md-button class=md-icon-button ng-click="card.openBookDetail($event, item)"><i class=material-icons>launch</i><md-tooltip md-direction=top>Detalhes</md-tooltip></md-button><md-button class=md-icon-button ng-click=card.addToFavorites(item) ng-show=!card.router><i class=material-icons>favorite</i><md-tooltip md-direction=top>Adicionar a Favoritos</md-tooltip></md-button><md-button class=md-icon-button ng-click="card.removeToFavorites($event, item)" ng-show=card.router><i class=material-icons><i class=material-icons>delete</i></i><md-tooltip md-direction=top>Remover dos Favoritos</md-tooltip></md-button></md-card-actions></md-card>'),o.put("app/components/navbar/navbar.html",'<md-toolbar class=md-hue-2><div class=md-toolbar-tools><a ui-sref=home title="Books - Home"><h2>Books</h2></a><span flex></span> <input ng-model=vm.txtSearch id=input-search class=md-input-search placeholder="pesquise aqui os livros..." ng-keyup="$event.keyCode == 13 && vm.goSearch()"> <span flex></span><md-button class=md-icon-button ng-click=vm.goSearch()><i class=material-icons>search</i><md-tooltip md-direction=left>Pesquisar</md-tooltip></md-button><md-button ui-sref=favorites class=md-icon-button><i class=material-icons>favorite</i><md-tooltip md-direction=left>Meus Favoritos</md-tooltip></md-button></div></md-toolbar>')}]);
//# sourceMappingURL=../maps/scripts/app-bf284a1195.js.map
